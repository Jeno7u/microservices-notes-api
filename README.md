# Microservice Notes REST API
A simple microservice REST API for creating, storing and using notes. 

---

## Prerequisites

- **Docker** (official download page [https://docs.docker.com/get-started/get-docker/](https://docs.docker.com/get-started/get-docker/))

---

## Verify Installation

Check if Docker and Docker Compose are installed:
```bash
docker --version
docker-compose --version
```

Output should be like:
```bash
Docker version 27.3.1, build ce12230
Docker Compose version v2.30.3-desktop.1
```

---

## Installation 

1. **Clone the repository**:
    ```bash
    git clone https://github.com/Jeno7u/microservices-notes-api.git
    cd microservices-notes-api
    ```

2. **Create .env files**
    Based on .env.template files create .env files in same directory and configure these variables

    Location of .env.template files in project:

    - **./.env.template** - Database environment variables

    - **./auth/.env.template** - Database url, secret key, algorithm of hashing, access token expire time

    - **./notes/.env.template** - Database url

3. **Start containers**:
    ```bash
    docker-compose up --build
    ```

4. **Verify all services are running (optional)**:
    ```bash
    docker-compose ps
    ```

The API is running on [http://localhost:8000](http://localhost:8000)

---

## API Endpoints

1. **Auth endpoints**

    | Method | Endpoint               | Description |
    |--------|------------------------|-----------------------------|
    | POST   | /auth/register/        | Registration                |
    | POST   | /auth/login/           | Authentication              |
    | POST   | /auth/validate-token/  | Validate token and get data |

2. **Notes endpoints**

    | Method | Endpoint               | Description                 |
    |--------|------------------------|-----------------------------|
    | POST   | /notes/create          | Create Note                 |
    | GET    | /notes                 | Get list of Notes           |
    | PUT    | /notes/{note_id}       | Update Note                 |
    | GET    | /notes/{note_id}       | Get Note                    |
    | DELETE | /notes/{note_id}       | Delete Note                 |

---

## API Documentation

This API uses **FastAPI**'s built-in **Swagger UI** for interactive API docs.

Once the server is running, open your browser and go to:
[http://localhost:8000/docs](http://localhost:8000/docs)


Here you can explore all the available endpoints, see request/response schemas, and even test the API interactively.

---

## Tech Stack

**Backend:**
- Python 3.11
- FastAPI
- SQLAlchemy
- PostgreSQL
- Pydantic

**Authentication:**
- JWT (JSON Web Tokens)

**Dev Tools:**
- Uvicorn (ASGI server)
- Alembic (database migrations)
- Docker & Docker Compose
- Poetry (package manager)
- .env configuration with `python-dotenv`

**Documentation:**
- Swagger UI (auto-generated by FastAPI)

---

## Architecture

This project follows a microservices architecture with:
- **API Gateway** (port 8000) - Main entry point
- **Auth Service** (port 8001) - User authentication
- **Notes Service** (port 8002) - Notes management
- **PostgreSQL Database** (port 5432)

---

## Database migration 

**For Auth Service**
```bash
docker-compose exec auth alembic revision --autogenerate -m "Auth init migration"
docker-compose exec auth alembic upgrade head
```

**For Notes Service**
```bash
docker-compose exec notes alembic revision --autogenerate -m "Notes init migration"
docker-compose exec notes alembic upgrade head
```

---

## License

This project is licensed under the [MIT License](LICENSE).